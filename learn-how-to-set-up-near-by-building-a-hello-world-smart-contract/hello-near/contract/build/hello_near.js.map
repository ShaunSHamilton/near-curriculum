{"version":3,"file":"hello_near.js","sources":["../node_modules/near-sdk-js/lib/near-bindgen.js","../node_modules/near-sdk-js/lib/api.js","../node_modules/near-sdk-js/lib/near-contract.js","../src/contract.ts"],"sourcesContent":["export function call(target, key, descriptor) {\n}\nexport function view(target, key, descriptor) {\n}\nexport function NearBindgen(target) {\n    return class extends target {\n        static _init() {\n            // @ts-ignore\n            let args = target.deserializeArgs();\n            let ret = new target(args);\n            // @ts-ignore\n            ret.init();\n            // @ts-ignore\n            ret.serialize();\n            return ret;\n        }\n        static _get() {\n            let ret = Object.create(target.prototype);\n            return ret;\n        }\n    };\n}\n","const U64_MAX = 2n ** 64n - 1n;\nconst EVICTED_REGISTER = U64_MAX - 1n;\nexport function log(...params) {\n    env.log(`${params\n        .map(x => x === undefined ? 'undefined' : x) // Stringify undefined\n        .map(x => typeof (x) === 'object' ? JSON.stringify(x) : x) // Convert Objects to strings\n        .join(' ')}` // Convert to string\n    );\n}\nexport function signerAccountId() {\n    env.signer_account_id(0);\n    return env.read_register(0);\n}\nexport function signerAccountPk() {\n    env.signer_account_pk(0);\n    return env.read_register(0);\n}\nexport function predecessorAccountId() {\n    env.predecessor_account_id(0);\n    return env.read_register(0);\n}\nexport function blockIndex() {\n    return env.block_index();\n}\nexport function blockHeight() {\n    return blockIndex();\n}\nexport function blockTimestamp() {\n    return env.block_timestamp();\n}\nexport function epochHeight() {\n    return env.epoch_height();\n}\nexport function attachedDeposit() {\n    return env.attached_deposit();\n}\nexport function prepaidGas() {\n    return env.prepaid_gas();\n}\nexport function usedGas() {\n    return env.used_gas();\n}\nexport function randomSeed() {\n    env.random_seed(0);\n    return env.read_register(0);\n}\nexport function sha256(value) {\n    env.sha256(value, 0);\n    return env.read_register(0);\n}\nexport function keccak256(value) {\n    env.keccak256(value, 0);\n    return env.read_register(0);\n}\nexport function keccak512(value) {\n    env.keccak512(value, 0);\n    return env.read_register(0);\n}\nexport function ripemd160(value) {\n    env.ripemd160(value, 0);\n    return env.read_register(0);\n}\nexport function ecrecover(hash, sig, v, malleabilityFlag) {\n    let ret = env.ecrecover(hash, sig, v, malleabilityFlag, 0);\n    if (ret === 0n) {\n        return null;\n    }\n    return env.read_register(0);\n}\nexport function panic(msg) {\n    if (msg !== undefined) {\n        env.panic(msg);\n    }\n    else {\n        env.panic();\n    }\n}\nexport function panicUtf8(msg) {\n    env.panic_utf8(msg);\n}\nexport function logUtf8(msg) {\n    env.log_utf8(msg);\n}\nexport function logUtf16(msg) {\n    env.log_utf16(msg);\n}\nexport function storageRead(key) {\n    let ret = env.storage_read(key, 0);\n    if (ret === 1n) {\n        return env.read_register(0);\n    }\n    else {\n        return null;\n    }\n}\nexport function storageHasKey(key) {\n    let ret = env.storage_has_key(key);\n    if (ret === 1n) {\n        return true;\n    }\n    else {\n        return false;\n    }\n}\nexport function validatorStake(accountId) {\n    return env.validator_stake(accountId);\n}\nexport function validatorTotalStake() {\n    return env.validator_total_stake();\n}\nexport function altBn128G1Multiexp(value) {\n    env.alt_bn128_g1_multiexp(value, 0);\n    return env.read_register(0);\n}\nexport function altBn128G1Sum(value) {\n    env.alt_bn128_g1_sum(value, 0);\n    return env.read_register(0);\n}\nexport function altBn128PairingCheck(value) {\n    let ret = env.alt_bn128_pairing_check(value);\n    if (ret === 1n) {\n        return true;\n    }\n    else {\n        return false;\n    }\n}\nexport function jsvmAccountId() {\n    env.jsvm_account_id(0);\n    return env.read_register(0);\n}\nexport function jsvmJsContractName() {\n    env.jsvm_js_contract_name(0);\n    return env.read_register(0);\n}\nexport function jsvmMethodName() {\n    env.jsvm_method_name(0);\n    return env.read_register(0);\n}\nexport function jsvmArgs() {\n    env.jsvm_args(0);\n    return env.read_register(0);\n}\nexport function jsvmStorageWrite(key, value) {\n    let exist = env.jsvm_storage_write(key, value, EVICTED_REGISTER);\n    if (exist === 1n) {\n        return true;\n    }\n    return false;\n}\nexport function jsvmStorageRead(key) {\n    let exist = env.jsvm_storage_read(key, 0);\n    if (exist === 1n) {\n        return env.read_register(0);\n    }\n    return null;\n}\nexport function jsvmStorageRemove(key) {\n    let exist = env.jsvm_storage_remove(key, EVICTED_REGISTER);\n    if (exist === 1n) {\n        return true;\n    }\n    return false;\n}\nexport function jsvmStorageHasKey(key) {\n    let exist = env.jsvm_storage_has_key(key);\n    if (exist === 1n) {\n        return true;\n    }\n    return false;\n}\nexport function jsvmCallRaw(contractName, method, args) {\n    env.jsvm_call(contractName, method, JSON.stringify(args), 0);\n    return env.read_register(0);\n}\nexport function jsvmCall(contractName, method, args) {\n    let ret = jsvmCallRaw(contractName, method, args);\n    if (ret === null) {\n        return ret;\n    }\n    return JSON.parse(ret);\n}\nexport function storageGetEvicted() {\n    return env.read_register(EVICTED_REGISTER);\n}\nexport function jsvmValueReturn(value) {\n    env.jsvm_value_return(value);\n}\n// Standalone only APIs\nexport function currentAccountId() {\n    env.current_account_id(0);\n    return env.read_register(0);\n}\nexport function input() {\n    env.input(0);\n    return env.read_register(0);\n}\nexport function storageUsage() {\n    return env.storage_usage();\n}\nexport function accountBalance() {\n    return env.account_balance();\n}\nexport function accountLockedBalance() {\n    return env.account_locked_balance();\n}\nexport function valueReturn(value) {\n    env.value_return(value);\n}\nexport function promiseCreate(accountId, methodName, args, amount, gas) {\n    return env.promise_create(accountId, methodName, args, amount, gas);\n}\nexport function promiseThen(promiseIndex, accountId, methodName, args, amount, gas) {\n    return env.promise_then(promiseIndex, accountId, methodName, args, amount, gas);\n}\nexport function promiseAnd(...promiseIndex) {\n    return env.promise_and(...promiseIndex);\n}\nexport function promiseBatchCreate(accountId) {\n    return env.promise_batch_create(accountId);\n}\nexport function promiseBatchThen(promiseIndex, accountId) {\n    return env.promise_batch_then(promiseIndex, accountId);\n}\nexport function promiseBatchActionCreateAccount(promiseIndex) {\n    env.promise_batch_action_create_account(promiseIndex);\n}\nexport function promiseBatchActionDeployContract(promiseIndex, code) {\n    env.promise_batch_action_deploy_contract(promiseIndex, code);\n}\nexport function promiseBatchActionFunctionCall(promiseIndex, methodName, args, amount, gas) {\n    env.promise_batch_action_function_call(promiseIndex, methodName, args, amount, gas);\n}\nexport function promiseBatchActionTransfer(promiseIndex, amount) {\n    env.promise_batch_action_transfer(promiseIndex, amount);\n}\nexport function promiseBatchActionStake(promiseIndex, amount, publicKey) {\n    env.promise_batch_action_stake(promiseIndex, amount, publicKey);\n}\nexport function promiseBatchActionAddKeyWithFullAccess(promiseIndex, publicKey, nonce) {\n    env.promise_batch_action_add_key_with_full_access(promiseIndex, publicKey, nonce);\n}\nexport function promiseBatchActionAddKeyWithFunctionCall(promiseIndex, publicKey, nonce, allowance, receiverId, methodNames) {\n    env.promise_batch_action_add_key_with_function_call(promiseIndex, publicKey, nonce, allowance, receiverId, methodNames);\n}\nexport function promiseBatchActionDeleteKey(promiseIndex, publicKey) {\n    env.promise_batch_action_delete_key(promiseIndex, publicKey);\n}\nexport function promiseBatchActionDeleteAccount(promiseIndex, beneficiaryId) {\n    env.promise_batch_action_delete_account(promiseIndex, beneficiaryId);\n}\nexport function promiseResultsCount() {\n    return env.promise_results_count();\n}\nexport var PromiseResult;\n(function (PromiseResult) {\n    PromiseResult[PromiseResult[\"NotReady\"] = 0] = \"NotReady\";\n    PromiseResult[PromiseResult[\"Successful\"] = 1] = \"Successful\";\n    PromiseResult[PromiseResult[\"Failed\"] = 2] = \"Failed\";\n})(PromiseResult || (PromiseResult = {}));\nexport function promiseResult(resultIdx) {\n    let status = env.promise_result(resultIdx, 0);\n    if (status == PromiseResult.Successful) {\n        return env.read_register(0);\n    }\n    else if (status == PromiseResult.Failed ||\n        status == PromiseResult.NotReady) {\n        return status;\n    }\n    else {\n        panic(`Unexpected return code: ${status}`);\n    }\n}\nexport function promiseReturn(promiseIdx) {\n    env.promise_return(promiseIdx);\n}\nexport function storageWrite(key, value) {\n    let exist = env.storage_write(key, value, EVICTED_REGISTER);\n    if (exist === 1n) {\n        return true;\n    }\n    return false;\n}\nexport function storageRemove(key) {\n    let exist = env.storage_remove(key, EVICTED_REGISTER);\n    if (exist === 1n) {\n        return true;\n    }\n    return false;\n}\nexport function storageByteCost() {\n    return 10000000000000000000n;\n}\n","import * as near from \"./api\";\nexport class NearContract {\n    deserialize() {\n        const rawState = near.storageRead(\"STATE\");\n        if (rawState) {\n            const state = JSON.parse(rawState);\n            // reconstruction of the contract class object from plain object\n            let c = this.default();\n            Object.assign(this, state);\n            for (const item in c) {\n                if (c[item].constructor?.deserialize !== undefined) {\n                    this[item] = c[item].constructor.deserialize(this[item]);\n                }\n            }\n        }\n        else {\n            throw new Error(\"Contract state is empty\");\n        }\n    }\n    serialize() {\n        near.storageWrite(\"STATE\", JSON.stringify(this));\n    }\n    static deserializeArgs() {\n        let args = near.input();\n        return JSON.parse(args || \"{}\");\n    }\n    static serializeReturn(ret) {\n        return JSON.stringify(ret);\n    }\n    init() { }\n}\n","import { NearBindgen, NearContract, near, call, view } from 'near-sdk-js';\n\n// The @NearBindgen decorator allows this code to compile to Base64.\n@NearBindgen\nclass MyContract extends NearContract {\n  greeting: string;\n\n  constructor({message=\"Hello\"}:{message: string}) {\n    //execute the NEAR Contract's constructor\n    super();\n    this.greeting = message;\n  }\n\n  default(){ return new MyContract({message: \"Hello\"}) }\n\n  // @call indicates that this is a 'change method' or a function\n  // that changes state on the blockchain. Change methods cost gas.\n  // For more info -> https://docs.near.org/docs/concepts/gas\n  @call\n  set_greeting({ message }: { message: string }): void {\n    near.log(`Saving greeting ${message}`);\n    this.greeting = message;\n  }\n\n  // @view indicates a 'view method' or a function that returns\n  // the current values stored on the blockchain. View calls are free\n  // and do not cost gas.\n  @view\n  get_greeting(): string {\n    near.log(`The current greeting is ${this.greeting}`);\n    return this.greeting;\n  }\n}\n"],"names":["call","target","key","descriptor","view","NearBindgen","_init","args","deserializeArgs","ret","init","serialize","_get","Object","create","prototype","U64_MAX","EVICTED_REGISTER","log","params","env","map","x","undefined","JSON","stringify","join","storageRead","storage_read","read_register","input","PromiseResult","storageWrite","value","exist","storage_write","NearContract","deserialize","rawState","near","state","parse","c","default","assign","item","constructor","Error","serializeReturn","MyContract","_class","_class2","message","greeting","set_greeting","get_greeting","_applyDecoratedDescriptor","getOwnPropertyDescriptor","_contract","value_return"],"mappings":"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"}